<mat-card>
    <mat-card-title>Reset Password</mat-card-title>
    <mat-card-content>
        <div *ngIf="tokenStatus === TokenStatus.Validating">
            Validating token...
        </div>
        <div *ngIf="tokenStatus === TokenStatus.Invalid">
            Token validation failed, if the token has expired you can get a new one at the <a routerLink="../forgot-password">forgot password</a> page.
        </div>

        <form *ngIf="tokenStatus == TokenStatus.Valid" [formGroup]="form" (ngSubmit)="onSubmit()">
            <p>
                <mat-form-field>
                    <input type="password"  matInput formControlName="password" placeholder="Password" required />
                    <div *ngIf="submitted && f.confirmPassword.errors">
                        <mat-error *ngIf="f.password.errors.required">Password is required</mat-error>
                        <mat-error *ngIf="f.password.errors.minlength">Password must be at least 6 characters</mat-error>
                    </div>
                </mat-form-field>
            </p>
            <p>
                <mat-form-field>
                    <input type="password" matInput formControlName="confirmPassword" placeholder="Confirm Password" required/>
                    <div *ngIf="submitted && f.confirmPassword.errors">
                        <mat-error *ngIf="f.confirmPassword.errors.required">Confirm Password is required</mat-error>
                        <mat-error *ngIf="f.confirmPassword.errors.mustMatch">Passwords must match</mat-error>
                    </div>
                </mat-form-field>
            </p>
            <div class = "button">
                <button [disabled]="loading" mat-button>
                    <span *ngIf="loading"></span>
                    Reset Password
                </button>
            </div>
        </form>
    </mat-card-content>
    <p>Cancel? <a routerLink="../login"> Login</a></p>
</mat-card>